(this["webpackJsonp2.6puhelinluettelo"]=this["webpackJsonp2.6puhelinluettelo"]||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},19:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var u=t(0),a=t.n(u),o=t(13),i=t.n(o),c=(t(19),t(2)),r=t(3),l=t.n(r),m="/api/persons",s=function(){return l.a.get(m).then((function(e){return e.data}))},f=function(e){return l.a.post(m,e).then((function(e){return e.data}))},d=function(e){return l.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},h=function(e,n){return l.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},E=function(){var e=Object(u.useState)([]),n=Object(c.a)(e,2),t=n[0],o=n[1],i=Object(u.useState)(""),r=Object(c.a)(i,2),l=r[0],m=r[1],E=Object(u.useState)(""),b=Object(c.a)(E,2),g=b[0],v=b[1],p=Object(u.useState)(""),j=Object(c.a)(p,2),w=j[0],O=j[1],y=Object(u.useState)(null),N=Object(c.a)(y,2),k=N[0],T=N[1],L=Object(u.useState)(null),S=Object(c.a)(L,2),C=S[0],D=S[1];Object(u.useEffect)((function(){s().then((function(e){return o(e)}))}),[]);var I=function(e){if(e.preventDefault(),t.findIndex((function(e){return e.name===l}))>-1){if(window.confirm("Nimi ".concat(l," on jo lis\xe4tty, vaihdetaanko numero uuteen?"))){var n=t.find((function(e){return e.name===l})).id;console.log("idee",n),h(n,{name:l,number:g}).then((function(e){console.log("muuttaminen onnistui!"),s().then((function(e){return o(e)})),D("Numeron muuttaminen onnistui!!"),setTimeout((function(){D(null)}),5e3)})).catch((function(e){T("Numeron muuttaminen ei onnistunut, yhteystietoa ei l\xf6ydy!!"),setTimeout((function(){T(null)}),5e3),o(t.filter((function(e){return e.id!==n})))}))}}else console.log("button clicked",l),f({name:l,number:g}).then((function(e){o(t.concat(e)),D("Numeron lis\xe4\xe4minen onnistui!"),setTimeout((function(){D(null)}),5e3)})).catch((function(e){T(e.response.data.error),setTimeout((function(){T(null)}),5e3)}))},P=function(e){m(e.target.value)},x=function(e){v(e.target.value)},B=function(e){console.log(e.target.value),O(e.target.value)};return a.a.createElement("div",null,a.a.createElement("h2",null,"PUHELINLUETTELO"),a.a.createElement("div",null,"Rajaus: ",a.a.createElement("input",{onChange:B})),a.a.createElement("h3",null,"Lis\xe4\xe4 uusi"),a.a.createElement("form",{onSubmit:I},a.a.createElement("div",null,"Nimi: ",a.a.createElement("input",{onChange:P}),a.a.createElement("br",null),"Numero: ",a.a.createElement("input",{onChange:x})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"Lis\xe4\xe4"))),a.a.createElement((function(e){var n=e.message;return null===n?null:a.a.createElement("div",{className:"error"},n)}),{message:k}),a.a.createElement((function(e){var n=e.message;return null===n?null:a.a.createElement("div",{className:"onnistui"},n)}),{message:C}),a.a.createElement("h3",null,"Numerot"),function(){console.log("jaa",t);var e=t;if(e.length<10)return w.length>0?(e=t.filter((function(e){return e.name.toLowerCase().includes(w.toLowerCase())}))).map((function(e){return a.a.createElement("div",{key:e.name},e.name," ",e.number)})):t.map((function(e){return a.a.createElement("div",{key:e.name},e.name," ",e.number," ",a.a.createElement("button",{onClick:function(){return function(e){window.confirm("Delete ".concat(e.name," ? "))&&d(e.id).then((function(e){console.log("success!"),s().then((function(e){return o(e)})),D("Poistaminen onnistui!!"),setTimeout((function(){D(null)}),5e3)})).catch((function(e){T("Poistaminen ei onnistunut!"),setTimeout((function(){T(null)}),5e3)})),console.log("iidee on:",e.id)}(e)}},"Delete"))}))}())};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[14,1,2]]]);
//# sourceMappingURL=main.7084bb06.chunk.js.map